<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:PleaseTweakWindows.ViewModels"
             xmlns:views="using:PleaseTweakWindows.Views"
             x:Class="PleaseTweakWindows.Views.TweakCategoryView"
             x:DataType="vm:TweakCategoryViewModel">

    <Border Classes="category-card" Margin="0,0,0,12">
        <StackPanel>
            <!-- Category Header -->
            <Border Classes="category-header" PointerPressed="OnHeaderPressed">
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <!-- Expand/Collapse arrow -->
                    <TextBlock Grid.Column="0"
                               Text="{Binding IsExpanded, Converter={x:Static views:TweakCategoryView.ArrowConverter}}"
                               FontSize="12"
                               Foreground="{StaticResource PtwTextSecondaryBrush}"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0"
                               Width="16" />

                    <!-- Category Title -->
                    <TextBlock Grid.Column="1"
                               Text="{Binding Title}"
                               Classes="category-title"
                               VerticalAlignment="Center" />

                    <!-- Run Full Script -->
                    <Button Grid.Column="2"
                            Content="Run All"
                            Classes="run-full"
                            Command="{Binding RunFullScriptCommand}"
                            VerticalAlignment="Center" />
                </Grid>
            </Border>

            <!-- Sub-tweaks list (collapsed by default) -->
            <ItemsControl ItemsSource="{Binding SubTweaks}"
                          IsVisible="{Binding IsExpanded}"
                          Margin="12,4,12,12">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="vm:SubTweakViewModel">
                        <views:SubTweakView DataContext="{Binding}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Border>
</UserControl>
